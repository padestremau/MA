{# src/MA/UserBundle/Resources/User/partenaires.html.twig #}

{% extends "MAUserBundle::user_general.html.twig" %}

{% block title %}
  {{ parent() }} - Admin - Partenaires
{% endblock %}

{% block MA_User_body %}

	<!-- BEGIN CONTENT -->
	<div id="page_content" class="row">

		<div id="sessionFlash" class="sessionFlash">
		</div>

		<div id="fullpage">
			<div class="section section_admin" id="section6">
				
				<!--  ///// ///// ///// ///// /////  AUTHORISED  ///// ///// ///// ///// ///// --> 
	        	{% if is_granted("ROLE_ADMIN") %}

	        		<!-- BEGIN nav admin -->
			          {% include 'includes/nav_admin.html.twig' %}
			        <!-- END nav admin -->

				  	<div id="section_admin" class="row center">
						<div class="row">
				    		<div class="row90 left">
				    			<a href="{{ path('ma_user_partners_new') }}" class="btn btn-admin">
				    				Nouveau partenaire
				    			</a>
				    		</div>
				    		{% if partners|length > 0 %}
								<div class="table-responsive">
			                      <table class="table">
			                        <thead>
			                          <tr>
			                            <th class="center">
			                              	Ordre
			                            </th>
			                            <th class="center">
			                              	Image
			                            </th>
			                            <th class="center">
			                              	Nom
			                            </th>
			                            <th class="center">
			                              	Site web
			                            </th>
			                            <th class="center">
			                              	Créé le
			                            </th>
			                            <th class="center">
			                              	Modifié le
			                            </th>
			                            <th class="center">
			                              	Statut
			                            </th>
			                            <th class="center">
			                              	Action
			                            </th>
			                          </tr>
			                        </thead>
			                        <tbody>
			                          {% for partner in partners %}
			                            <tr>
				                            <td class="center hover_popup">
				                              	{% if partner.orderList|length > 0 %}
				                              		{{ partner.orderList }}
				                              	{% else %}
				                              		Erreur
			                              			<span class="italic">
			                              				Vous devez donner un ordre
				                              		</span>
				                              	{% endif %}
				                            </td>
				                            <td class="center">
				                              	{% if partner.alt|length > 0 and partner.url|length > 0 %}
													<div class="partner_img_admin" style="background-size: 100%; min-height:60px; background-image: url('{{ asset(partner.webPath) }}'); background-size: cover; background-position: 50%;">
													</div>
												{% else %}
													<div class="partner_img_admin" style="background-size: 100%; min-height:60px; background-image: url('{{ asset('img/system/defaults/default_img.png') }}'); background-size: cover; background-position: 50%;">
													</div>
												{% endif %}
				                            </td>
				                            <td class="center">
				                              	{% if partner.name|length > 0 %}
				                              		{{ partner.name }}
				                              	{% else %}
				                              		---
				                              	{% endif %}
				                            </td>
				                            <td class="center">
				                              	{% if partner.website|length > 0 %}
				                              		<a href="{{ partner.website }}" target="_blank">
				                              			{{ partner.website }}
				                              		</a>
				                              	{% else %}
				                              		---
				                              	{% endif %}
				                            </td>
				                            <td class="center">
				                              	{% if partner.createdAt|length > 0 %}
				                              		{{ partner.createdAt|date("d/M/Y") }}
				                              	{% else %}
				                              		---
				                              	{% endif %}
				                            </td>
				                            <td class="center">
				                              	{% if partner.updatedAt|length > 0 %}
				                              		{{ partner.updatedAt|date("d/M/Y") }}
				                              	{% else %}
				                              		---
				                              	{% endif %}
				                            </td>
				                            <th class="center hover_popup">
				                            	{% if partner.status %}
				                              		{% if partner.status == "active" %}
				                              			Active
				                              		{% elseif partner.status == "toCome" %}
				                              			A venir
				                              		{% elseif partner.status == "inactive" %}
				                              			Inactive
				                              		{% else %}
				                              			Erreur
				                              			<span class="italic">
				                              				Vous devez choisir parmi les statuts proposés
					                              		</span>
				                              		{% endif %}
				                              	{% else %}
				                              		Erreur
				                              		<span class="italic">
														Vous devez choisir parmi les statuts proposés
				                              		</span>
				                              	{% endif %}
				                            </th>
				                            <td class="center">
				                            	<a href="javascript:loadContentAdmin('{{ path('ma_user_partners_edit', {'partnerId':partner.id}) }}')" class="btn btn-action-admin-icon">
					                            	<span class="glyphicon glyphicon-pencil"></span>
				                            	</a>
				                            	<a href="javascript:areYouSureDeletePartner('{{ path('ma_user_partners_delete', {'partnerId':partner.id}) }}')" class="btn btn-action-admin-icon">
					                            	<span class="glyphicon glyphicon-trash"></span>
				                            	</a>
				                            </td>
			                            </tr>
			                          {% endfor %}
			                        </tbody>
			                      </table>
			                    </div>
							{% else %}
								<div class="center col-md-9">
									Désolé, aucun partenaire ...
								</div>
								<div class="col-md-3"></div>
							{% endif %}
				    	</div>

		    			<br/><br/><br/>
		    			<!-- ADMIN JAVASCRIPTS -->
					    {% javascripts 
					      'js/admin_javascripts_misAnd.js'

					      %}
					      <script type="text/javascript" src="{{ asset_url }}"></script>
					    {% endjavascripts %}
					    <!-- END ADMIN JAVASCRIPTS -->
				  	</div>
				  	
	        	{% else %}
	        		<div>
	        			<br/><br/><br/><br/><br/>
	        			Vous n'êtes pas autorisé(e) à naviguer dans cette partie du site !
	        		</div>
	        	{% endif %}

			</div>
		</div>
	</div>
	<!-- END CONTENT -->

{% endblock MA_User_body %}
